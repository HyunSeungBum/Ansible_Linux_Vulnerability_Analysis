#!/usr/bin/python
# -*- coding: utf-8 -*-

from ansible.module_utils.basic import *

if __name__ == '__main__':
    argument_spec = dict(
        name = dict(required=True, type='str'),
    )
    module = AnsibleModule(argument_spec=argument_spec)
    result = { "changed": False, "rc" : 0}
    name = module.params["name"]
    if name:
        result['msg'] = "Hello %s!" % name
    else:
        result['failed'] = True
        result['msg']  = "Empty name is invalid"
    
    if result.get('failed'):
        module.fail_json(**result)
    else:
        module.exit_json(**result)

if __name__ == '__main__':
    main()
