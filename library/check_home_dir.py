#!/usr/bin/python
# -*- coding: utf-8 -*-

from ansible.module_utils.basic import *
import os.path

if __name__ == '__main__':
    argument_spec = dict(
        home_dir = dict(required=True, type='str')
    )
    module = AnsibleModule(argument_spec=argument_spec, supports_check_mode=True)
    result = { "changed": False}

    home_dir = module.params["home_dir"]

    if '/home' not in home_dir and '/root' not in home_dir:
        result['failed'] = True
        result['msg'] = "A user's home directory doesn't base on /home directory: %s" % (home_dir)

    if result.get('failed'):
        module.fail_json(**result)
    else:
        module.exit_json(**result)
